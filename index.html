<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
		<title>bfd - terminal</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="Robots" content="index,follow"/>
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
		<link id="primary" rel="stylesheet" type="text/css" href="main.css"/>
	</head>
	<body>
<div id="main">
<div id="header">billdimmick.com</div>
<div id="terminal">
<pre>&gt; pwd
/home/bfd

&gt; cat links
<a href="http://twitter.com/bfd">twitter</a>        <a href="http://linkedin.com/in/dimmick">linkedIn</a>        <a href="https://github.com/bdimmick">github</a>

&gt; ls -lt employers
lr-------- 1 bfd bfd    7 Sept 30 2013 current -&gt; twitter
-r-------- 1 bfd bfd 9977 Sept 30 2013 twitter
-r-------- 1 bfd bfd 3432 Jul  01 2011 salesforce.com
-r-------- 1 bfd bfd 1442 Jun  26 2006 amazon
-r-------- 1 bfd bfd 9810 Jun  11 2004 rho
-r-------- 1 bfd bfd 4362 Feb  14 2003 unc medical
-r-------- 1 bfd bfd 4372 Dec  12 2000 hiddenmind
-r-------- 1 bfd bfd 2888 May  05 2000 sentrisystems

&gt; ls -lt education
-r-x------ 1 bfd bfd 21345 May 05 2000 ncsu ba computer science

&gt; cat interests
cat: interests: No such file or directory

&gt; <span id="input"></span><blink>_</blink>
<div id='output'></div>
</pre>
</div>
</div>
<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script>
execute_on = true

pad_to = function(val, len) {
	while (val.length < len) {
		val = val + " "
	}
	return val
}

commands = {
	'help': [
		"Displays this message.",
		function(params) {
			output = ""
			keys = []
			maxlen = 0
			$.each(commands, function(k, v) { 
				keys.push(k) 
				if (k.length > maxlen) {
					maxlen = k.length
				}
			})
			keys.sort()
			keys.forEach(function(k) {
				output = output + pad_to(k, maxlen) + " - " + commands[k][0] + "\n"
			})
			return output 
		}
	],
	'cat': [
		"Prints a file.",
		function(params) { 
			output = ""
			params.forEach(function(f) { 
				$.get('/' + f,
        	function(data) { output = output + data + "\n" }
      	).fail( function() { output = output + "cat: " + f + ": No such file or directory\n" })
			})
			return output
		}
	],
	'curl': [
		"Loads a URL in a new window.",
		function(params) { window.open(params[0]); return "" }
	]
}

execute = function(cmd) {
	if (execute_on) {
		c = cmd[0]
		entry = commands[c]
		output = "'" + c + "' - command not found."
		if (typeof entry != 'undefined') {
			cmd.shift()
			output = entry[1](cmd)
			if (typeof output == 'undefined') {
				output = ""
			}
		}
		$('div#output').text("\n" + output)
	}
}

$(function() {
	$('body').keypress(
		function(event) {
			if (event.keyCode == 13) {
				$('span#input').text().split(';').forEach(
					function(command) {
						execute(command.trim().split(' '))
					}
				)
				
				$('span#input').text('')
			} else {
				$('span#input').text($('span#input').text() + String.fromCharCode(event.charCode))
			}
			event.preventDefault()
			return false
		})
})
</script>
	</body>
</html>
